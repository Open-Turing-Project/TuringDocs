<html>
<head><title>procedure</title></head>
<body>
<table width="100%"><tr valign="top"><td align="left"><font size="+2"><b>procedure</b></font></td><td align="right"><font size="+1"><b>declaration</b></font></td></table><p>
<table><tr valign="top"><td><b>Syntax&nbsp;&nbsp;</b></td>
<td> A <i>procedureDeclaration</i> is:<p>
<table><tr valign="top"><td width="40">&nbsp;</td><td colspan="8"><font size="+1"><b>procedure</b> <i>id</i> [(<i>paramDeclaration</i> {, <i>paramDeclaration</i> })]</td></tr>
<tr valign="top"><td width="40">&nbsp;</td><td width="40">&nbsp;</td><td colspan="7"><font size="+1"><i>statementsAndDeclarations</i></td></tr>
<tr valign="top"><td width="40">&nbsp;</td><td colspan="8"><font size="+1"><b>end</b> <i>id</i></td></tr>
</table><p><tr valign="top"><td><b>Description&nbsp;&nbsp;</b></td>
<td> A procedure declaration creates (but does not run) a new procedure. The name of the procedure (<i>id</i>) is given in two places, just after <b>procedure</b> and just after <b>end</b>.<p>
<tr valign="top"><td><b>Example&nbsp;&nbsp;</b></td>
<td> <p>
<pre><tt>        <b>procedure</b> <i>greetings</i>
            <b>put</b> "Hello world"
        <b>end</b> <i>greetings</i>
        
        <i>greetings</i>           <i>% This outputs </i>Hello world
        
        <b>procedure</b> <i>sayItAgain</i> ( <i>msg </i>: <b>string</b>, <i>n</i> : <b>int</b> )
            <b>for</b><i> i</i> : 1<i> </i>..<i> n</i>
                <b>put</b> <i>msg</i>
            <b>end</b> <b>for</b>
        <b>end</b> <i>sayItAgain</i>
        
        <i>sayItAgain</i> ("Toot", 2 ) <i>% </i>Toot <i>is output twice</i>
        
        <b>procedure</b> <i>double</i> ( <b>var</b> <i>x</i> : <b>real</b> )
            <i>x</i> := 2 <b>*</b> <i>x</i>
        <b>end</b> <i>double</i>
        
        <b>var</b> <i>y</i> : <b>real</b> := 3.14
        <i>double</i> ( <i>y</i> )        <i>% This doubles the value of y</i></tt></pre>
<tr valign="top"><td><b>Details&nbsp;&nbsp;</b></td>
<td> The set of parameters declared with the procedure are called <i>formal</i> parameters. In the <i>double </i>procedure, for example, <i>x </i>is a formal parameter. A procedure is called (invoked) by a procedure<i> call statement</i> which consists of the procedure's name followed by the parenthesized list of <i>actual </i>parameters (if any). For example, <i>double</i>(<i>y</i>) is a call having <i>y</i> as an actual parameter. If there are no parameters (see the <i>greet</i> procedure above), the call does not have parentheses. The keyword <b>procedure</b> can be abbreviated to <b>proc</b>.<p>
Ordinarily, a procedure <i>returns </i>(finishes and goes back to the place where it was called) by reaching its <b>end</b>. However, the <b>return</b> statement in a procedure causes it to return immediately. Note that <b>return</b> can also be used in the main program to cause it to halt immediately.<p>
Only parameters declared using <b>var</b> may be changed in the procedure, for example, <i>x</i> is changed in the <i>double</i> procedure. The upper bounds of arrays and strings that are parameters may be declared to be an asterisk (<b>*</b>). This means that the bound is that of the actual parameter. See <i>paramDeclaration</i> for details about parameters.<p>
Procedures and functions cannot be declared inside other procedures and functions.<p>
The syntax of a <i>procedureDeclaration</i> presented above has been simplified by leaving out the optional <b>import</b> list, <b>pre</b> condition, <b>init</b> clause, <b>post</b> condition and exception handler. The full syntax<i> </i>is<p>
<pre><tt>        <b>procedure</b> [ <b>pervasive</b> ] <i>id</i>
            [ ( [ <i>paramDeclaration </i>{,<i>paramDeclaration </i>} ] ) ]
            [ :<i> deviceSpecification</i> ]
            [ <b>pre</b> <i>trueFalseExpn</i> ]
            [ <b>init</b> <i>id</i> := <i>expn</i> {, <i>id</i> := <i>expn</i> } ]
            [ <b>post</b> <i>trueFalseExpn</i> ]
            [ <i>exceptionHandler</i> ]
            <i>statementsAndDeclarations</i>
        <b>end</b> <i>id</i></tt></pre>
A procedure must be declared before being called. To allow for mutually recursive procedures, there are <b>forward</b> declarations of procedures with later declaration of each procedure <b>body</b>. See <b>forward</b> and <b>body</b> declarations for explanations.<p>
<tr valign="top"><td><b>See also&nbsp;&nbsp;</b></td>
<td> <b><a href="import.html">import</a></b> list, <b><a href="pre.html">pre</a></b> <a href="condition.html">condition</a>, <b><a href="init.html">init</a></b> clause, <b><a href="post.html">post</a></b> <a href="condition.html">condition</a> and <i>exceptionHandler</i> for explanations of these features. See <b><a href="pervasive.html">pervasive</a></b> for information on <b><a href="pervasive.html">pervasive</a></b> procedures. See <b>exceptionHandler</b>. The optional <i>deviceSpecification </i>is used only in procedures declared in monitors and is used to create an <i>interrupt handling <a href="">procedure</a></i>. See <b><a href="monitor.html">monitor</a></b> for details.<p>
</table></body>
</html>
